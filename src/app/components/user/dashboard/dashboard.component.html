<app-nav-bar></app-nav-bar>

<div class="dashboard-container">
  <!-- Filter Dropdown -->
  <div class="filter-container">
    <label for="careUnit">Care Unit:</label>
    <select
      id="careUnit"
      [(ngModel)]="selectedUnit"
      (change)="getPatientsByCUID()"
    >
      <option value="">-- Select Care Unit --</option>
      <option *ngFor="let unit of careUnits" [value]="unit._id">
        {{ unit.careUnit }}
      </option>
    </select>
  </div>

  <!-- Patient Cards -->
  <div class="patient-card-container">
    <div
      *ngFor="let patient of filteredPatients; let i = index"
      class="patient-card"
      [ngClass]="{
        normal: patient.severity?.toLowerCase() === 'normal',
        severe: patient.severity?.toLowerCase() === 'severe',
        critical: patient.severity?.toLowerCase() === 'critical'
      }"
      [style.animationDelay]="i * 0.1 + 's'"
    >
      <!-- Card Header -->
      <div class="card-header">
        <span class="card-title">Bed {{ patient.bedName }}</span>
        <span class="card-arrow" routerLink="/user-flow-sheet" [queryParams]="{patientId: patient._id}" title="View Details">â†’</span>
      </div>

      <!-- Card Body -->
      <div class="card-body">
        <p>
          <strong>Name:</strong> 
          <span>{{ patient.name | titlecase }}</span>
        </p>
        <p>
          <strong>Age:</strong>
          <span>{{ patient.age }} years</span>
        </p>
        <p>
          <strong>Condition:</strong>
          <span [ngStyle]="{'color': getConditionColor(patient.severity)}">
            {{ patient.severity | titlecase }}
          </span>
        </p>
      </div>
    </div>
  </div>
</div>
